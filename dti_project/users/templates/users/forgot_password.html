{% extends 'users/layout.html' %}
{% load static %}

{% block title %} Forgot Password {% endblock %}

{% block body %}
<div class="glass-layer">
    <div class="authentication-form-container">

        <!-- Step 1: Enter email -->
        <form action="{% url 'forgot_password' %}" class="authentication-form" 
              id="forgot-password-form" method="post">
            <img src="/media/media/dti-logo.png" alt="DTI Logo Image" id="dti-logo">
            {% csrf_token %}
            <header>
                <h1>Forgot Your Password?</h1>
                <h3>Enter your registered email address to receive a password reset code.</h3>
            </header>

            <div class="form-scroll">
                <div class="form-group">
                    <label for="id_email">Email Address</label>
                    <input type="email" name="email" id="id_email" required
                        value="{{ form.email.value|default_if_none:'' }}">
                </div>
            </div>

            <button type="submit">Send Reset Code</button>

            <div class="message-feedback-container">
                <p>Remember your password? <a href="{% url 'sign-in' %}">Sign in instead</a></p>
                {% if messages %}
                    <div class="feedback-messages">
                        {% for message in messages %}
                            <p class="{{ message.tags }}">{{ message }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </form>

        <!-- Step 2: Verification modal -->
        {% include 'users/verification_modal.html' %}

        <div class="graphics-panel">
            <header>
                <h1>Reset your password securely.</h1>
                <h3>Weâ€™ll send you an email with instructions to create a new one.</h3>
            </header>
        </div>
    </div>
</div>

<!-- Verification JS -->
<script src="{% static 'users/verification.js' %}"></script>

{% endblock %}
