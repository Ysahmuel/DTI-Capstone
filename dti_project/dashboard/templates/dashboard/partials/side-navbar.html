{% load custom_filters %}

<aside class="side-navbar extended">
    <button id="collapse-nav-btn">
        <i class="fa-solid fa-angle-left"></i>
    </button>
    <nav>
        <header>
            <h1>DTI</h1>
        </header>
        <section aria-labelledby="main-menu-heading">
            <h2 class="nav-section-heading">Main</h2>
            <ul class="side-nav-list">
                <li class="nav-item">
                    <a href="{% url 'dashboard' %}" class="nav-link">
                        <i class="fa-solid fa-house"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                {% if user.role != 'admin' %}
                    <li class="nav-item dropdown">
                        <button class="nav-dropdown-btn">
                            <i class="fa-solid fa-plus"></i>
                            <span>Create</span>
                            <i class="fa-solid fa-angle-down"></i>
                        </button>
                        <div class="nav-dropdown-list">
                            {% if user.role == 'business_owner' %}
                                <a href="{% url 'create-sales-promotion' %}">Sales Promotion Application</a>
                                <a href="{% url 'create-personal-data-sheet' %}">Personal Data Sheet</a>
                                <a href="{% url 'create-service-repair-accreditation' %}">Service and Repair Accreditation</a>
                            {% elif user.role == 'collection_agent' %}
                                <a href="{% url 'create-inspection-validation-report' %}">Inspection Validation Report</a>
                                <a href="{% url 'create-order-of-payment' %}">Order of Payment</a>
                                <a href="{% url 'create-checklist-evaluation-sheet' %}">Requirement Checklist</a>
                            {% endif %}
                        </div>
                    </li>
                {% endif %}
                    <li class="nav-item dropdown">
                        <button class="nav-dropdown-btn">
                            <i class="fa-solid fa-file"></i>
                            <span>Documents</span>
                            <i class="fa-solid fa-angle-down"></i>
                        </button>
                        <div class="nav-dropdown-list">
                            <a href="{% url 'all-documents' %}">
                                <span>All Documents</span>
                            </a>
                        </div>
                    </li>

                {% if user.role == 'admin' %}
                    <li class="nav-item dropdown">
                        <button class="nav-dropdown-btn">
                            <i class="fa-solid fa-user"></i>
                            <span>Manage Users</span>
                            <i class="fa-solid fa-angle-down"></i>
                        </button>
                        <div class="nav-dropdown-list">
                            <a href="{% url 'staff_accounts' %}">
                                <span>Staff Accounts</span>
                            </a>
                            <a href="{% url 'bo_accounts' %}">
                                <span>Business Owner Accounts</span>
                            </a>
                        </div>
                    </li>
                {% endif %}

                {% if user.role == 'collection_agent' %}
                    <li class="nav-item">
                        <a href="{% url 'collection-report-list' %}" class="nav-link">
                            <i class="fa-solid fa-file-invoice"></i>
                            <span>Collection Reports</span>
                        </a>
                    </li>
                {% endif %}
            </ul>
        </section>

        <section aria-labelledby="account-menu-heading" id="account-menu-section">
            <h2 class="nav-section-heading">Others</h2>
            <ul class="side-nav-list">
                <!-- Settings -->
                <li class="nav-item">
                    <a href="{% url 'settings' %}" class="nav-link">
                        <i class="fa-solid fa-gear"></i>
                        <span>Settings</span>
                    </a>
                </li>

                <!-- User Profile -->
                <li class="nav-item">
                    <a href="{% url 'profile' user.id %}" id="profile-link">
                        <img src="{{ user.profile_picture.url }}" alt="">
                        <div id="logged-in-user-details">
                            <strong>
                                {% if user.is_authenticated %}
                                {{ user.get_full_name|default:user.username }}
                                {% endif %}
                            </strong>
                            <p>{{ user.role|titlecase }}</p>
                        </div>
                    </a>
                </li>

                <!-- Logout -->
                <li class="nav-item">
                    <a href="{% url 'logout' %}" class="nav-link">
                        <i class="fa-solid fa-right-from-bracket"></i>
                        <span>Logout</span>
                    </a>
                </li>
            </ul>
        </section>


    </nav>
</aside>